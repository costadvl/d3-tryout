<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://d3js.org/d3.v4.js"></script>
</head>

<body>
    <style>
       
    </style>



    <svg class="chart"></svg>
    <script>
        d3.selection.prototype.first = function () {
            return d3.select(this[0][0]);
        };
        d3.selection.prototype.last = function () {
            var last = this.size() - 1;
            console.log(this._groups[0][last])
            return d3.select(this._groups[0][last]);
        };
        var data = [4, 8, 15, 16, 23, 42];

        var width = 900,
            height = 520,
            barWidth = width / data.length,
            visualWidth = 10;

        var y = d3.scaleLinear()
            .range([height, 0])
            .domain([0, d3.max(data)])

        var chart = d3.select(".chart")
            .attr("width", width)
            .attr("height", height);
        var bar = chart.selectAll("g")
            .data(data)
            .enter().append("g")
            .attr("transform", function (d, i) {
                return "translate(" + (i * barWidth) + ",0)";
            });

        bar.append("rect")
            .attr("fill", "lightskyblue")
            .attr("rx", visualWidth / 2)
            .attr("y", function (d) {
                return y(d) + (visualWidth / 2);
            })
            .attr("height", function (d) {
                return height - y(d);
            })
            .attr("width", visualWidth);
       var rect = d3.selectAll("g rect");

       rect.last()
            .attr("fill","orange")
        // bar.last()
        //     .attr("fill", "orange")
        // bar[0][data.length-1].attr("fill", "orange");
        // bar.append("text")
        //     .attr("y", function(d) { return y(d) - 3; })
        //     .attr("y", barWidth / 2)
        //     .attr("dy", ".35em")
        //     .text(function(d) { return d; });
    </script>
</body>

</html>
